

\begin{tikzpicture}
\node [style=agent] (A)  at (4, 6) {Alice};
\node [style=agent] (B)  at (4, 4) {Bob};
\node [style=agent] (DS) at (7, 8) {Delivery Service};

\draw [arrow] (A.north east) -- (DS) node [left=2pt, near end, color=black, fill=none] {``Hello''} node [below=2pt, near end, color=red, fill=none] {1};

\draw [arrow] (B.north east) -- (DS.south) node [right=1pt, near end, color=black, fill=none] {Poll} node [below=14pt, near end, color=red, fill=none] {2};
\draw [arrow] (DS.south east) -- (B.east) node [right=2pt, near end, color=black, fill=none] {``Hello''};

\draw [arrow] (DS.north west)  to[bend right=45] (A.west);
\draw [arrow] (A.north west)   to[bend left=45] (DS.west);

\node [style=invis, color=red, text width=4.5em, above=1.45cm of A] (z) {3};
\node [style=invis, color=black, text width=4.5em, above left=1.0cm and -0.5cm of A] (y) {``Hello''};

\node [style=invis, color=black, text width=4.5em, above right=1.2cm and -1.7cm of A] (y) {Poll};


%\node [style=invis, text width=4.5em, below left=0.5cm and -1.7cm of AS] (z) {Get Key};
%
%\node [style=invis, color=red, text width=4.5em, below left=2.9cm and -1.5cm of AS] (z) {4};
%\node [style=invis, color=black, text width=4.5em, below left=4.0cm and -1.5cm of AS] (z) {$\mathtt{pk}^{Alice}_{1}$};
%
%
%\draw [arrow] (B.north west) to[bend left=45 ] (AS.south west);
%\draw [arrow] (AS.west)      to[bend right=45] (B.west) ;
%
%\draw [arrow] (DS.west)      to[bend right=45] (A.north);
%\node [style=invis, color=red, text width=4.5em, above=0.9cm of A] (z) {5};

\end{tikzpicture}
